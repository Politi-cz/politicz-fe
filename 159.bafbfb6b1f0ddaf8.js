"use strict";(self.webpackChunkpoliticz_fe=self.webpackChunkpoliticz_fe||[]).push([[159],{1159:(Et,U,r)=>{r.r(U),r.d(U,{PartyModule:()=>Ft});var Q=r(6347),d=r(838),y=r(2886),t=r(5879),p=r(9316),w=r(2366),u=r(5403),s=r(6814),q=r(583),c=r(6223),_=r(3813),Y=r(3304),S=r.n(Y);function I(){return n=>{const o=new Date(n.value);return S()((new Date).setHours(0,0,0,0)).diff(o,"year",!0)>=21?null:{bellowMinimumAge:!0}}}var P=r(4516),m=r(4170),Z=r(8034),v=r(9147),f=r(9515);function B(n,o){1&n&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"form-date")))}function R(n,o){1&n&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"form-minimum-age")))}function D(n,o){1&n&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"form-required")))}function K(n,o){1&n&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"form-bad-url-pattern")))}let F=(()=>{class n extends q.N{constructor(i){super(),this._fb=i,this.politicianForm=this._fb.group({fullName:this._fb.control("",{nonNullable:!0,validators:[c.kI.required]}),birthDate:this._fb.control("",{nonNullable:!0,validators:[c.kI.required,I()]}),imageUrl:this._fb.control("",{nonNullable:!0,validators:[c.kI.required,c.kI.pattern(_.c.URL_PATTERN)]}),facebookUrl:this._fb.control("",c.kI.pattern(_.c.URL_PATTERN)),instagramUrl:this._fb.control("",c.kI.pattern(_.c.URL_PATTERN)),twitterUrl:this._fb.control("",c.kI.pattern(_.c.URL_PATTERN))})}ngOnInit(){this.politician&&this.politicianForm.patchValue({fullName:this.politician.fullName,birthDate:this.politician.birthDate,facebookUrl:this.politician.facebookUrl,instagramUrl:this.politician.instagramUrl,imageUrl:this.politician.imageUrl,twitterUrl:this.politician.twitterUrl})}}return n.\u0275fac=function(i){return new(i||n)(t.Y36(c.qu))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-politician-form"]],inputs:{politician:"politician"},features:[t.qOj],decls:54,vars:41,consts:[[1,"form-content",3,"formGroup","ngSubmit"],["appearance","outline",1,"span-6"],["matInput","","formControlName","fullName"],["matInput","","formControlName","birthDate",3,"matDatepicker"],[4,"ngIf"],["matIconSuffix","",3,"for"],["startView","multi-year"],["picker",""],["appearance","outline",1,"span-12"],["matInput","","formControlName","imageUrl"],["matInput","","formControlName","twitterUrl"],["matInput","","formControlName","instagramUrl"],["matInput","","formControlName","facebookUrl"],[1,"span-12",3,"createForm","backEvent"]],template:function(i,a){if(1&i&&(t.TgZ(0,"form",0),t.NdJ("ngSubmit",function(){return a.submit(a.politicianForm)}),t.TgZ(1,"mat-form-field",1)(2,"mat-label"),t._uU(3),t.ALo(4,"translate"),t.qZA(),t._UZ(5,"input",2),t.TgZ(6,"mat-error"),t._uU(7),t.ALo(8,"translate"),t.qZA()(),t.TgZ(9,"mat-form-field",1)(10,"mat-label"),t._uU(11),t.ALo(12,"translate"),t.qZA(),t._UZ(13,"input",3),t.YNc(14,B,3,3,"mat-error",4),t.YNc(15,R,3,3,"mat-error",4),t.TgZ(16,"mat-hint"),t._uU(17),t.ALo(18,"translate"),t.qZA(),t._UZ(19,"mat-datepicker-toggle",5)(20,"mat-datepicker",6,7),t.qZA(),t.TgZ(22,"mat-form-field",8)(23,"mat-label"),t._uU(24),t.ALo(25,"translate"),t.qZA(),t._UZ(26,"input",9),t.YNc(27,D,3,3,"mat-error",4),t.YNc(28,K,3,3,"mat-error",4),t.qZA(),t.TgZ(29,"mat-form-field",8)(30,"mat-label"),t._uU(31),t.ALo(32,"translate"),t.qZA(),t._UZ(33,"input",10),t.TgZ(34,"mat-error"),t._uU(35),t.ALo(36,"translate"),t.qZA()(),t.TgZ(37,"mat-form-field",8)(38,"mat-label"),t._uU(39),t.ALo(40,"translate"),t.qZA(),t._UZ(41,"input",11),t.TgZ(42,"mat-error"),t._uU(43),t.ALo(44,"translate"),t.qZA()(),t.TgZ(45,"mat-form-field",8)(46,"mat-label"),t._uU(47),t.ALo(48,"translate"),t.qZA(),t._UZ(49,"input",12),t.TgZ(50,"mat-error"),t._uU(51),t.ALo(52,"translate"),t.qZA()(),t.TgZ(53,"app-form-actions",13),t.NdJ("backEvent",function(){return a.cancel()}),t.qZA()()),2&i){const e=t.MAs(21);t.Q6J("formGroup",a.politicianForm),t.xp6(3),t.Oqu(t.lcZ(4,19,"politician-name")),t.xp6(4),t.Oqu(t.lcZ(8,21,"form-required")),t.xp6(4),t.Oqu(t.lcZ(12,23,"birthday")),t.xp6(2),t.Q6J("matDatepicker",e),t.xp6(1),t.Q6J("ngIf",a.politicianForm.controls.birthDate.hasError("required")),t.xp6(1),t.Q6J("ngIf",a.politicianForm.controls.birthDate.hasError("bellowMinimumAge")),t.xp6(2),t.Oqu(t.lcZ(18,25,"year-format")),t.xp6(2),t.Q6J("for",e),t.xp6(5),t.Oqu(t.lcZ(25,27,"politician-profileImageUrl")),t.xp6(3),t.Q6J("ngIf",a.politicianForm.controls.imageUrl.hasError("required")),t.xp6(1),t.Q6J("ngIf",a.politicianForm.controls.imageUrl.hasError("pattern")),t.xp6(3),t.Oqu(t.lcZ(32,29,"politician-twitterUrl")),t.xp6(4),t.Oqu(t.lcZ(36,31,"form-bad-url-pattern")),t.xp6(4),t.Oqu(t.lcZ(40,33,"politician-instagramUrl")),t.xp6(4),t.Oqu(t.lcZ(44,35,"form-bad-url-pattern")),t.xp6(4),t.Oqu(t.lcZ(48,37,"politician-facebookUrl")),t.xp6(4),t.Oqu(t.lcZ(52,39,"form-bad-url-pattern")),t.xp6(2),t.Q6J("createForm",!!a.politician)}},dependencies:[s.O5,c._Y,c.Fj,c.JJ,c.JL,c.sg,c.u,P.Nt,m.KE,m.hX,m.bx,m.TO,m.R9,Z.Mq,Z.hl,Z.nW,v.j,f.X$]}),n})();function G(n,o){if(1&n){const i=t.EpF();t.TgZ(0,"app-politician-form",3),t.NdJ("cancelEvent",function(){t.CHM(i);const e=t.oxw();return t.KtG(e.navigateBack())})("submitEvent",function(e){t.CHM(i);const l=t.oxw();return t.KtG(l.onSubmit(e))}),t.qZA()}2&n&&t.Q6J("politician",o.ngIf)}let $=(()=>{class n{constructor(i,a,e,l){this._route=i,this._router=a,this._politicalPartiesService=e,this._store=l}ngOnInit(){this._route.paramMap.subscribe(i=>{this.politicalPartyId=i.get("id"),this.politicianId=i.get("politicianId"),this._store.dispatch(new d.K.GetPoliticalParty(this.politicalPartyId)),this.politician$=this._store.select(y.k.getPoliticianById(this.politicianId))})}onSubmit(i){const a={id:this.politicianId,...i};this._store.dispatch(new d.K.EditPolitician(a)).subscribe(()=>this.navigateBack())}navigateBack(){this._router.navigate(["/political-party/detail/"+this.politicalPartyId])}}return n.\u0275fac=function(i){return new(i||n)(t.Y36(p.gz),t.Y36(p.F0),t.Y36(w.A),t.Y36(u.yh))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-edit-politician"]],decls:7,vars:6,consts:[[1,"container"],[1,"container__content"],[3,"politician","cancelEvent","submitEvent",4,"ngIf"],[3,"politician","cancelEvent","submitEvent"]],template:function(i,a){1&i&&(t.TgZ(0,"section",0)(1,"div",1)(2,"h1"),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.YNc(5,G,1,1,"app-politician-form",2),t.ALo(6,"async"),t.qZA()()),2&i&&(t.xp6(3),t.Oqu(t.lcZ(4,2,"politician-edit")),t.xp6(2),t.Q6J("ngIf",t.lcZ(6,4,a.politician$)))},dependencies:[s.O5,F,s.Ov,f.X$]}),n})();var C=r(7582),j=r(426),h=r(6825),O=r(7700),T=r(2296),E=r(617),N=r(2596),H=r(7474),L=r(8833),z=r(6332),A=r(5195),X=r(9655),V=r(4386);function W(n,o){if(1&n&&(t.TgZ(0,"a",7),t._UZ(1,"img",8),t.qZA()),2&n){const i=t.oxw(2);t.Q6J("href",i.politician.facebookUrl,t.LSH)}}function tt(n,o){if(1&n&&(t.TgZ(0,"a",7),t._UZ(1,"img",9),t.qZA()),2&n){const i=t.oxw(2);t.Q6J("href",i.politician.instagramUrl,t.LSH)}}function it(n,o){if(1&n&&(t.TgZ(0,"a",7),t._UZ(1,"img",10),t.qZA()),2&n){const i=t.oxw(2);t.Q6J("href",i.politician.twitterUrl,t.LSH)}}function nt(n,o){if(1&n){const i=t.EpF();t.ynx(0),t.TgZ(1,"mat-card",1)(2,"app-admin-quick-menu-actions",2),t.NdJ("actionClickEvt",function(e){t.CHM(i);const l=t.oxw();return t.KtG(l.handleActionEvent(e))}),t.qZA(),t.TgZ(3,"mat-card-header")(4,"mat-card-title",3),t._uU(5),t.qZA(),t.TgZ(6,"mat-card-subtitle"),t._uU(7),t.ALo(8,"dateFormatter"),t.qZA()(),t._UZ(9,"img",4),t.TgZ(10,"mat-card-content",5),t.YNc(11,W,2,1,"a",6),t.YNc(12,tt,2,1,"a",6),t.YNc(13,it,2,1,"a",6),t.qZA()(),t.BQk()}if(2&n){const i=t.oxw();t.xp6(5),t.Oqu(i.politician.fullName),t.xp6(2),t.Oqu(t.lcZ(8,6,i.politician.birthDate)),t.xp6(2),t.Q6J("src",i.politician.imageUrl?i.politician.imageUrl:"assets/man-user-svgrepo-com.svg",t.LSH),t.xp6(2),t.Q6J("ngIf",i.politician.facebookUrl),t.xp6(1),t.Q6J("ngIf",i.politician.instagramUrl),t.xp6(1),t.Q6J("ngIf",i.politician.twitterUrl)}}let at=(()=>{class n{constructor(i,a,e){this._store=i,this._router=a,this._dialog=e}handleActionEvent(i){const a=this._store.selectSnapshot(y.k.getPoliticalPartyId);switch(i.type){case L.U.EDIT:this._router.navigate(["/political-party/detail",a,"edit-politician",this.politician.id]);break;case L.U.DELETE:this.openDialogAndRemovePolitician()}}openDialogAndRemovePolitician(){this._dialog.open(z.$,{data:{title:"dialog-remove",content:"remove-politician-content",confirmButtonText:"remove-politician",closeButtonText:"dialog-action-cancel"}}).afterClosed().subscribe(e=>{e&&this._store.dispatch(new d.K.RemovePolitician(this.politician))})}}return n.\u0275fac=function(i){return new(i||n)(t.Y36(u.yh),t.Y36(p.F0),t.Y36(O.uw))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-politician"]],inputs:{politician:"politician"},decls:1,vars:1,consts:[[4,"ngIf"],["appearance","outlined",1,"politician-card","mat-elevation-z2"],[3,"actionClickEvt"],[1,"politician-card__title"],["alt","politician_image","mat-card-image","",1,"politician-card__image",3,"src"],[1,"politician-card__media"],["target","_blank",3,"href",4,"ngIf"],["target","_blank",3,"href"],["src","assets/icons/facebook.svg","aria-label","redirect to facebook profile of politic","alt","redirect to facebook profile of politic",1,"mat-elevation-z4"],["src","assets/icons/instagram.svg","aria-label","redirect to instagram profile of politic","alt","redirect to instagram profile of politic",1,"mat-elevation-z4"],["src","assets/icons/twitter.svg","aria-label","redirect to twitter profile of politic","alt","redirect to twitter profile of politic",1,"mat-elevation-z4"]],template:function(i,a){1&i&&t.YNc(0,nt,14,8,"ng-container",0),2&i&&t.Q6J("ngIf",a.politician)},dependencies:[s.O5,A.a8,A.dn,A.dk,A.G2,A.$j,A.n5,X.i,V.l],styles:[".politician-card__title[_ngcontent-%COMP%]{margin-right:3rem}.politician-card__image[_ngcontent-%COMP%]{display:block!important;height:30rem!important;object-fit:cover}.politician-card__media[_ngcontent-%COMP%]{display:flex;justify-content:space-evenly;margin-top:1rem;height:4rem}.politician-card__media[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:3rem;transition:all .5s;border-radius:25%}.politician-card__media[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]:hover{scale:1.1}"]}),n})();var J=r(5812);let ot=(()=>{class n{constructor(i){this.store=i}transform(i,a){if(!a||null==i)return this.store.dispatch(new J.x.Set({politicianFilterCount:i.length})),i;const e=i.filter(l=>_.c.textIncludesSearchedValueCaseInsensitive(l.fullName,a));return this.store.dispatch(new J.x.Set({politicianFilterCount:e.length})),e}}return n.\u0275fac=function(i){return new(i||n)(t.Y36(u.yh,16))},n.\u0275pipe=t.Yjl({name:"filterPoliticians",type:n,pure:!0}),n})();const et=["partySearchInput"];function rt(n,o){1&n&&t._UZ(0,"app-politician",16),2&n&&t.Q6J("politician",o.$implicit)}function ct(n,o){1&n&&(t.ynx(0),t.TgZ(1,"span",17),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.BQk()),2&n&&(t.xp6(2),t.Oqu(t.lcZ(3,1,"no-result")))}const lt=function(n){return["/political-party/detail",n,"add-politician"]};function pt(n,o){if(1&n&&(t.TgZ(0,"div",18)(1,"span",17),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"button",19),t._uU(5),t.ALo(6,"translate"),t.TgZ(7,"mat-icon"),t._uU(8,"add"),t.qZA()()()),2&n){const i=t.oxw(2).ngIf;t.xp6(2),t.Oqu(t.lcZ(3,3,"no-politicians")),t.xp6(2),t.Q6J("routerLink",t.VKq(7,lt,i.id)),t.xp6(1),t.hij(" ",t.lcZ(6,5,"politician-add")," ")}}function st(n,o){if(1&n&&(t.ynx(0),t.TgZ(1,"div",13),t.YNc(2,rt,1,1,"app-politician",14),t.ALo(3,"filterPoliticians"),t.YNc(4,ct,4,3,"ng-container",1),t.ALo(5,"async"),t.YNc(6,pt,9,9,"div",15),t.ALo(7,"async"),t.qZA(),t.BQk()),2&n){const i=o.ngIf;t.oxw();const a=t.MAs(21),e=t.oxw();let l;t.xp6(2),t.Q6J("ngForOf",t.xi3(3,3,i,null!==(l=null==a?null:a.value)&&void 0!==l?l:"")),t.xp6(2),t.Q6J("ngIf",0===t.lcZ(5,6,e.politiciansCount)&&i.length),t.xp6(2),t.Q6J("ngIf",0===t.lcZ(7,8,e.politiciansCount)&&!i.length)}}function mt(n,o){if(1&n){const i=t.EpF();t.ynx(0),t.TgZ(1,"div",2)(2,"h1",3),t._uU(3),t._UZ(4,"app-party-actions",4),t.qZA(),t._UZ(5,"img",5),t.TgZ(6,"h2",6),t._uU(7),t.ALo(8,"translate"),t.qZA(),t.TgZ(9,"div",7)(10,"div",8)(11,"button",9),t.NdJ("click",function(){t.CHM(i);const e=t.oxw();return t.KtG(e.toggleSearch())}),t.ALo(12,"translate"),t.TgZ(13,"mat-icon"),t._uU(14,"search"),t.qZA()(),t.TgZ(15,"div")(16,"mat-form-field",10)(17,"mat-label"),t._uU(18),t.ALo(19,"translate"),t.qZA(),t._UZ(20,"input",11,12),t.qZA()()()()(),t.YNc(22,st,8,10,"ng-container",1),t.ALo(23,"async"),t.BQk()}if(2&n){const i=o.ngIf,a=t.oxw();t.xp6(3),t.hij("",i.name," "),t.xp6(1),t.Q6J("iconName","settings")("partyId",i.id),t.xp6(1),t.Q6J("src",i.imageUrl,t.LSH),t.xp6(2),t.Oqu(t.lcZ(8,10,"politicians")),t.xp6(4),t.Q6J("matTooltip",t.lcZ(12,12,"politician-search")),t.xp6(5),t.Q6J("@searchAnimation",a.searchState),t.xp6(2),t.Oqu(t.lcZ(19,14,"politician-search")),t.xp6(2),t.Q6J("formControl",a.searchControl),t.xp6(2),t.Q6J("ngIf",t.lcZ(23,16,a.politicians$))}}class g{constructor(o,i,a,e){this._route=o,this._store=i,this._router=a,this._dialog=e,this.searchState="closed",this.searchControl=new c.NI("",{nonNullable:!0})}ngOnInit(){this._route.paramMap.subscribe(o=>(this.searchControl.reset(),this.searchState="closed",this._store.dispatch(new d.K.GetPoliticalParty(o.get("id")))))}ngOnDestroy(){this.searchControl.reset()}toggleSearch(){this.searchState="closed"===this.searchState?"open":"closed",this.searchControl.reset()}}g.\u0275fac=function(o){return new(o||g)(t.Y36(p.gz),t.Y36(u.yh),t.Y36(p.F0),t.Y36(O.uw))},g.\u0275cmp=t.Xpm({type:g,selectors:[["app-party"]],viewQuery:function(o,i){if(1&o&&t.Gf(et,5),2&o){let a;t.iGM(a=t.CRH())&&(i.partySearchInput=a.first)}},decls:3,vars:3,consts:[[1,"container"],[4,"ngIf"],[1,"party"],[1,"heading"],[1,"party__act__actions",3,"iconName","partyId"],["alt","party logo",1,"party__logo",3,"src"],[1,"subheading"],[1,"party__act"],[1,"party__act__search"],["color","primary","mat-icon-button","",3,"matTooltip","click"],["appearance","outline"],["type","text","matInput","",3,"formControl"],["partySearchInput",""],[1,"politicians"],[3,"politician",4,"ngFor","ngForOf"],["class","no-politician",4,"ngIf"],[3,"politician"],[1,"no-result"],[1,"no-politician"],["mat-raised-button","","color","primary",1,"button-add",3,"routerLink"]],template:function(o,i){1&o&&(t.TgZ(0,"section",0),t.YNc(1,mt,24,18,"ng-container",1),t.ALo(2,"async"),t.qZA()),2&o&&(t.xp6(1),t.Q6J("ngIf",t.lcZ(2,1,i.politicalParty$)))},dependencies:[s.sg,s.O5,p.rH,c.Fj,c.JJ,c.oH,T.lW,T.RK,E.Hw,P.Nt,m.KE,m.hX,N.gM,H.S,at,s.Ov,f.X$,ot],styles:[".party[_ngcontent-%COMP%]{height:100%;grid-column:center-start/center-end}.party__act[_ngcontent-%COMP%]{display:flex;flex-direction:column}.party__act__actions[_ngcontent-%COMP%]{align-self:center}.party__act__search[_ngcontent-%COMP%]{display:flex;gap:1rem;margin-top:1rem}@media only screen and (max-width: 37.5em){.party__act[_ngcontent-%COMP%]{justify-content:center}}.party__logo[_ngcontent-%COMP%]{object-fit:contain;max-height:25rem;display:block;margin:2rem auto;border-radius:2%}.party[_ngcontent-%COMP%]   .empty[_ngcontent-%COMP%]{grid-column:2/-1}@media only screen and (max-width: 37.5em){.party[_ngcontent-%COMP%]   .empty[_ngcontent-%COMP%]{grid-column:auto}}.politicians[_ngcontent-%COMP%]{grid-column:center-start/center-end;display:grid;padding-bottom:2rem;grid-template-columns:repeat(3,minmax(22rem,32rem));gap:3rem}@media only screen and (max-width: 62.5em){.politicians[_ngcontent-%COMP%]{grid-template-columns:[center-start] repeat(2,minmax(20rem,1fr)) [center-end]}}@media only screen and (max-width: 37.5em){.politicians[_ngcontent-%COMP%]{grid-template-columns:[center-start] minmax(20rem,1fr) [center-end];gap:2rem}}.no-result[_ngcontent-%COMP%]{font-size:2rem;grid-column:1/-1}@media only screen and (max-width: 53.125em){.no-result[_ngcontent-%COMP%]{line-height:4rem}}.no-politician[_ngcontent-%COMP%]{grid-column:1/-1;display:flex;flex-direction:column;gap:3rem;align-items:center}.visible-shit[_ngcontent-%COMP%]{visibility:visible}.invisible-shit[_ngcontent-%COMP%]{visibility:hidden}"],data:{animation:[(0,h.X$)("searchAnimation",[(0,h.SB)("open",(0,h.oB)({width:"200px",opacity:1})),(0,h.SB)("closed",(0,h.oB)({width:"0px",opacity:0})),(0,h.eR)("closed <=> open",[(0,h.jt)("0.2s")])])]}}),(0,C.gn)([(0,u.Ph)(j.t.getPoliticianFilterCount)],g.prototype,"politiciansCount",void 0),(0,C.gn)([(0,u.Ph)(y.k.getPoliticalParty)],g.prototype,"politicalParty$",void 0),(0,C.gn)([(0,u.Ph)(y.k.getPoliticians)],g.prototype,"politicians$",void 0);let ut=(()=>{class n{constructor(i,a,e){this._store=i,this._router=a,this._route=e}ngOnInit(){this._route.paramMap.subscribe(i=>{this.politicalPartyId=i.get("id"),this._store.dispatch(new d.K.GetPoliticalParty(this.politicalPartyId))})}onSubmit(i){this._store.dispatch(new d.K.AddPolitician(i)).subscribe(()=>this.navigateBack())}navigateBack(){this._router.navigate(["/political-party/detail/"+this.politicalPartyId])}}return n.\u0275fac=function(i){return new(i||n)(t.Y36(u.yh),t.Y36(p.F0),t.Y36(p.gz))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-add-politician"]],decls:6,vars:3,consts:[[1,"container"],[1,"container__content"],[3,"submitEvent","cancelEvent"]],template:function(i,a){1&i&&(t.TgZ(0,"section",0)(1,"div",1)(2,"h1"),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.TgZ(5,"app-politician-form",2),t.NdJ("submitEvent",function(l){return a.onSubmit(l)})("cancelEvent",function(){return a.navigateBack()}),t.qZA()()()),2&i&&(t.xp6(3),t.Oqu(t.lcZ(4,1,"politician-new")))},dependencies:[F,f.X$]}),n})();var _t=r(8645),k=r(6028),x=r(2557);function dt(n,o){1&n&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"form-required")))}function gt(n,o){1&n&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"form-bad-url-pattern")))}function ft(n,o){if(1&n){const i=t.EpF();t.TgZ(0,"mat-chip-row",11),t.NdJ("removed",function(){const l=t.CHM(i).$implicit,b=t.oxw();return t.KtG(b.removeTag(l))})("edited",function(e){const b=t.CHM(i).$implicit,Ot=t.oxw();return t.KtG(Ot.editTag(b,e))}),t._uU(1),t.TgZ(2,"button",12)(3,"mat-icon"),t._uU(4,"cancel"),t.qZA()()()}if(2&n){const i=o.$implicit;t.Q6J("editable",!0),t.xp6(1),t.hij(" ",i," "),t.xp6(1),t.uIk("aria-label","remove "+i)}}function ht(n,o){1&n&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"form-date")))}function yt(n,o){1&n&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"form-minimum-age")))}function Zt(n,o){1&n&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"form-required")))}function At(n,o){1&n&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"form-bad-url-pattern")))}function xt(n,o){if(1&n){const i=t.EpF();t.TgZ(0,"div",30)(1,"button",31),t.NdJ("click",function(){t.CHM(i);const e=t.oxw().index,l=t.oxw(2);return t.KtG(l.removePolitician(e))}),t.ALo(2,"translate"),t.TgZ(3,"mat-icon"),t._uU(4,"clear"),t.qZA()()()}2&n&&(t.xp6(1),t.Q6J("matTooltip",t.lcZ(2,1,"remove-politician")))}function Pt(n,o){if(1&n&&(t.ynx(0,18),t.TgZ(1,"h3",19),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"mat-form-field",20)(5,"mat-label"),t._uU(6),t.ALo(7,"translate"),t.qZA(),t._UZ(8,"input",21),t.TgZ(9,"mat-error"),t._uU(10),t.ALo(11,"translate"),t.qZA()(),t.TgZ(12,"mat-form-field",20)(13,"mat-label"),t._uU(14),t.ALo(15,"translate"),t.qZA(),t._UZ(16,"input",22),t.YNc(17,ht,3,3,"mat-error",4),t.YNc(18,yt,3,3,"mat-error",4),t.TgZ(19,"mat-hint"),t._uU(20),t.ALo(21,"translate"),t.qZA(),t._UZ(22,"mat-datepicker-toggle",23)(23,"mat-datepicker",24,25),t.qZA(),t.TgZ(25,"mat-form-field",1)(26,"mat-label"),t._uU(27),t.ALo(28,"translate"),t.qZA(),t._UZ(29,"input",3),t.YNc(30,Zt,3,3,"mat-error",4),t.YNc(31,At,3,3,"mat-error",4),t.qZA(),t.TgZ(32,"mat-form-field",1)(33,"mat-label"),t._uU(34),t.ALo(35,"translate"),t.qZA(),t._UZ(36,"input",26),t.TgZ(37,"mat-error"),t._uU(38),t.ALo(39,"translate"),t.qZA()(),t.TgZ(40,"mat-form-field",1)(41,"mat-label"),t._uU(42),t.ALo(43,"translate"),t.qZA(),t._UZ(44,"input",27),t.TgZ(45,"mat-error"),t._uU(46),t.ALo(47,"translate"),t.qZA()(),t.TgZ(48,"mat-form-field",1)(49,"mat-label"),t._uU(50),t.ALo(51,"translate"),t.qZA(),t._UZ(52,"input",28),t.TgZ(53,"mat-error"),t._uU(54),t.ALo(55,"translate"),t.qZA()(),t.YNc(56,xt,5,3,"div",29),t.BQk()),2&n){const i=o.$implicit,a=o.index,e=t.MAs(24);t.Q6J("formGroupName",a),t.xp6(2),t.AsE("",a+1+". "," ",t.lcZ(3,21,"politician"),""),t.xp6(4),t.Oqu(t.lcZ(7,23,"politician-name")),t.xp6(4),t.Oqu(t.lcZ(11,25,"form-required")),t.xp6(4),t.Oqu(t.lcZ(15,27,"birthday")),t.xp6(2),t.Q6J("matDatepicker",e),t.xp6(1),t.Q6J("ngIf",i.controls.birthDate.hasError("required")),t.xp6(1),t.Q6J("ngIf",i.controls.birthDate.hasError("bellowMinimumAge")),t.xp6(2),t.Oqu(t.lcZ(21,29,"year-format")),t.xp6(2),t.Q6J("for",e),t.xp6(5),t.Oqu(t.lcZ(28,31,"politician-profileImageUrl")),t.xp6(3),t.Q6J("ngIf",i.controls.imageUrl.hasError("required")),t.xp6(1),t.Q6J("ngIf",i.controls.imageUrl.hasError("pattern")),t.xp6(3),t.Oqu(t.lcZ(35,33,"politician-twitterUrl")),t.xp6(4),t.Oqu(t.lcZ(39,35,"form-bad-url-pattern")),t.xp6(4),t.Oqu(t.lcZ(43,37,"politician-instagramUrl")),t.xp6(4),t.Oqu(t.lcZ(47,39,"form-bad-url-pattern")),t.xp6(4),t.Oqu(t.lcZ(51,41,"politician-facebookUrl")),t.xp6(4),t.Oqu(t.lcZ(55,43,"form-bad-url-pattern")),t.xp6(2),t.Q6J("ngIf",a>0)}}function vt(n,o){if(1&n){const i=t.EpF();t.ynx(0,13),t.TgZ(1,"h2",14),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.YNc(4,Pt,57,45,"ng-container",15),t.TgZ(5,"div",16)(6,"button",17),t.NdJ("click",function(){t.CHM(i);const e=t.oxw();return t.KtG(e.addPolitician())}),t.ALo(7,"translate"),t.TgZ(8,"mat-icon"),t._uU(9,"add"),t.qZA()()(),t.BQk()}if(2&n){const i=t.oxw();t.xp6(2),t.Oqu(t.lcZ(3,3,"politician-add")),t.xp6(2),t.Q6J("ngForOf",null==i.politiciansFormArray?null:i.politiciansFormArray.controls),t.xp6(2),t.Q6J("matTooltip",t.lcZ(7,5,"politician-add-next"))}}let M=(()=>{class n extends q.N{set party(i){i&&(this._party=i,this.initializeFormData())}get party(){return this._party}constructor(i){super(),this._fb=i,this.partyForm=this._fb.group({name:this._fb.nonNullable.control("",{validators:c.kI.required}),imageUrl:this._fb.nonNullable.control("",{validators:[c.kI.required,c.kI.pattern(_.c.URL_PATTERN)]}),tags:this._fb.nonNullable.control([""],c.kI.required),politicians:this._fb.array([])}),this.tags=[],this.addOnBlur=!0,this.separatorKeysCodes=[k.K5,k.OC]}ngOnInit(){this.initializeFormData()}get politiciansFormArray(){return this.partyForm?.controls.politicians??null}submit(){this.partyForm.valid&&(this.partyForm.patchValue({tags:[...this.tags]}),this.submitEvent.emit(this.partyForm.value))}addPolitician(){const i=this._fb.group({fullName:this._fb.control("",{nonNullable:!0,validators:[c.kI.required]}),birthDate:this._fb.control("",{nonNullable:!0,validators:[c.kI.required,I()]}),imageUrl:this._fb.control("",{nonNullable:!0,validators:[c.kI.required,c.kI.pattern(_.c.URL_PATTERN)]}),facebookUrl:this._fb.control("",c.kI.pattern(_.c.URL_PATTERN)),instagramUrl:this._fb.control("",c.kI.pattern(_.c.URL_PATTERN)),twitterUrl:this._fb.control("",c.kI.pattern(_.c.URL_PATTERN))});this.politiciansFormArray&&this.politiciansFormArray.push(i)}removePolitician(i){this.politiciansFormArray&&this.politiciansFormArray.removeAt(i)}addTag(i){const a=(i.value||"").trim();a&&this.tags.push(a),i.chipInput.clear()}removeTag(i){const a=this.tags.indexOf(i);a>=0&&this.tags.splice(a,1)}editTag(i,a){const e=a.value.trim();if(!e)return void this.removeTag(i);const l=this.tags.indexOf(i);l>=0&&(this.tags[l]=e)}initializeFormData(){this.addPolitician(),this.party&&(this.partyForm.removeControl("politicians"),this.tags=[...this.party.tags],this.partyForm.patchValue({name:this.party.name,imageUrl:this.party.imageUrl,tags:[...this.party.tags]}))}}return n.\u0275fac=function(i){return new(i||n)(t.Y36(c.qu))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-party-form"]],inputs:{party:"party"},features:[t.qOj],decls:33,vars:30,consts:[[1,"form-content",3,"formGroup","ngSubmit"],["appearance","outline",1,"span-12"],["matInput","","formControlName","name"],["matInput","","formControlName","imageUrl"],[4,"ngIf"],["formControlName","tags"],["chipGrid",""],[3,"editable","removed","edited",4,"ngFor","ngForOf"],[3,"placeholder","matChipInputFor","matChipInputSeparatorKeyCodes","matChipInputAddOnBlur","matChipInputTokenEnd"],["formArrayName","politicians",4,"ngIf"],[1,"span-12",3,"createForm","backEvent"],[3,"editable","removed","edited"],["matChipRemove",""],["formArrayName","politicians"],[1,"span-12"],[3,"formGroupName",4,"ngFor","ngForOf"],[1,"span-12","add-politician-container"],["type","button","mat-fab","","color","primary",3,"matTooltip","click"],[3,"formGroupName"],[1,"span-12","politician-number"],["appearance","outline",1,"span-6"],["matInput","","formControlName","fullName"],["matInput","","formControlName","birthDate",3,"matDatepicker"],["matIconSuffix","",3,"for"],["startView","multi-year"],["picker",""],["matInput","","formControlName","twitterUrl"],["matInput","","formControlName","instagramUrl"],["matInput","","formControlName","facebookUrl"],["class","span-12 delete-politician",4,"ngIf"],[1,"span-12","delete-politician"],["type","button","mat-fab","","color","warn",3,"matTooltip","click"]],template:function(i,a){if(1&i&&(t.TgZ(0,"form",0),t.NdJ("ngSubmit",function(){return a.submit()}),t.TgZ(1,"mat-form-field",1)(2,"mat-label"),t._uU(3),t.ALo(4,"translate"),t.qZA(),t._UZ(5,"input",2),t.TgZ(6,"mat-error"),t._uU(7),t.ALo(8,"translate"),t.qZA()(),t.TgZ(9,"mat-form-field",1)(10,"mat-label"),t._uU(11),t.ALo(12,"translate"),t.qZA(),t._UZ(13,"input",3),t.YNc(14,dt,3,3,"mat-error",4),t.YNc(15,gt,3,3,"mat-error",4),t.qZA(),t.TgZ(16,"mat-form-field",1)(17,"mat-label"),t._uU(18),t.ALo(19,"translate"),t.qZA(),t.TgZ(20,"mat-chip-grid",5,6),t.YNc(22,ft,5,3,"mat-chip-row",7),t.TgZ(23,"input",8),t.NdJ("matChipInputTokenEnd",function(l){return a.addTag(l)}),t.ALo(24,"translate"),t.qZA()(),t.TgZ(25,"mat-hint"),t._uU(26),t.ALo(27,"translate"),t.qZA(),t.TgZ(28,"mat-error"),t._uU(29),t.ALo(30,"translate"),t.qZA()(),t.YNc(31,vt,10,7,"ng-container",9),t.TgZ(32,"app-form-actions",10),t.NdJ("backEvent",function(){return a.cancel()}),t.qZA()()),2&i){const e=t.MAs(21);t.Q6J("formGroup",a.partyForm),t.xp6(3),t.Oqu(t.lcZ(4,16,"party-name")),t.xp6(4),t.Oqu(t.lcZ(8,18,"form-required")),t.xp6(4),t.Oqu(t.lcZ(12,20,"party-image")),t.xp6(3),t.Q6J("ngIf",a.partyForm.controls.imageUrl.hasError("required")),t.xp6(1),t.Q6J("ngIf",a.partyForm.controls.imageUrl.hasError("pattern")),t.xp6(3),t.Oqu(t.lcZ(19,22,"party-tags")),t.xp6(4),t.Q6J("ngForOf",a.tags),t.xp6(1),t.Q6J("placeholder",t.lcZ(24,24,"party-tag-placeholder"))("matChipInputFor",e)("matChipInputSeparatorKeyCodes",a.separatorKeysCodes)("matChipInputAddOnBlur",a.addOnBlur),t.xp6(3),t.Oqu(t.lcZ(27,26,"chips-hint")),t.xp6(3),t.Oqu(t.lcZ(30,28,"chips-required")),t.xp6(2),t.Q6J("ngIf",!a.party),t.xp6(1),t.Q6J("createForm",!!a.party)}},dependencies:[s.sg,s.O5,c._Y,c.Fj,c.JJ,c.JL,c.sg,c.u,c.x0,c.CE,T.cs,x.RA,x.oH,x.qH,x.z3,E.Hw,P.Nt,m.KE,m.hX,m.bx,m.TO,m.R9,Z.Mq,Z.hl,Z.nW,N.gM,v.j,f.X$],styles:[".politician-number[_ngcontent-%COMP%]{font-size:1.3rem;font-weight:700}.add-politician-container[_ngcontent-%COMP%], .delete-politician[_ngcontent-%COMP%]{display:flex;justify-content:center}"],changeDetection:0}),n})();function Ct(n,o){if(1&n){const i=t.EpF();t.TgZ(0,"app-party-form",4),t.NdJ("submitEvent",function(e){t.CHM(i);const l=t.oxw(2);return t.KtG(l.onSubmit(e))})("cancelEvent",function(){t.CHM(i);const e=t.oxw().ngIf,l=t.oxw();return t.KtG(l.navigateBack(e.id))}),t.qZA()}if(2&n){const i=t.oxw().ngIf;t.Q6J("party",i)}}function Tt(n,o){if(1&n&&(t.ynx(0),t.TgZ(1,"h1"),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.YNc(4,Ct,1,1,"app-party-form",3),t.BQk()),2&n){const i=o.ngIf;t.xp6(2),t.Oqu(t.lcZ(3,2,"admin-party-edit")),t.xp6(2),t.Q6J("ngIf",i.id)}}let bt=(()=>{class n{constructor(i,a,e){this._route=i,this._router=a,this._store=e,this.destroy$=new _t.x}ngOnInit(){this._route.paramMap.subscribe(i=>{this._store.dispatch(new d.K.GetPoliticalParty(i.get("id"))),this.politicalParty$=this._store.select(y.k.getPoliticalParty)})}ngOnDestroy(){this.destroy$.next()}onSubmit(i){const a=this._store.selectSnapshot(y.k.getPoliticalParty);this._store.dispatch(new d.K.UpdatePoliticalParty({...i,id:a.id,politicians:[...a.politicians]})).subscribe(()=>this.navigateBack(a.id))}navigateBack(i){this._router.navigate(["/political-party/detail/"+i])}}return n.\u0275fac=function(i){return new(i||n)(t.Y36(p.gz),t.Y36(p.F0),t.Y36(u.yh))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-edit-party"]],decls:4,vars:3,consts:[[1,"container"],[1,"container__content"],[4,"ngIf"],[3,"party","submitEvent","cancelEvent",4,"ngIf"],[3,"party","submitEvent","cancelEvent"]],template:function(i,a){1&i&&(t.TgZ(0,"section",0)(1,"div",1),t.YNc(2,Tt,5,4,"ng-container",2),t.ALo(3,"async"),t.qZA()()),2&i&&(t.xp6(2),t.Q6J("ngIf",t.lcZ(3,1,a.politicalParty$)))},dependencies:[s.O5,M,s.Ov,f.X$]}),n})();var Ut=r(8107);const qt=[{path:"",redirectTo:"/news",pathMatch:"full"},{path:"add",component:(()=>{class n{constructor(i,a,e){this._router=i,this._notificationService=a,this._store=e}onSubmit(i){i.politicians.length<1?this._notificationService.showError("error-politician-required"):this._store.dispatch(new d.K.CreatePoliticalParty(i)).subscribe(()=>this.navigateBack())}navigateBack(){this._router.navigate(["/news"])}}return n.\u0275fac=function(i){return new(i||n)(t.Y36(p.F0),t.Y36(Ut.g),t.Y36(u.yh))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-add-party"]],decls:6,vars:3,consts:[[1,"container"],[1,"container__content"],[3,"submitEvent","cancelEvent"]],template:function(i,a){1&i&&(t.TgZ(0,"section",0)(1,"div",1)(2,"h1"),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.TgZ(5,"app-party-form",2),t.NdJ("submitEvent",function(l){return a.onSubmit(l)})("cancelEvent",function(){return a.navigateBack()}),t.qZA()()()),2&i&&(t.xp6(3),t.Oqu(t.lcZ(4,1,"admin-party-add")))},dependencies:[M,f.X$]}),n})()},{path:"detail/:id",component:g},{path:"detail/:id/add-politician",component:ut},{path:"detail/:id/edit-politician/:politicianId",component:$},{path:"detail/:id/edit",component:bt}];let It=(()=>{class n{}return n.\u0275fac=function(i){return new(i||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[p.Bz.forChild(qt),p.Bz]}),n})(),Ft=(()=>{class n{}return n.\u0275fac=function(i){return new(i||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[s.ez,It,Q.m,v.j]}),n})()}}]);